(function(a){var i="facebox_overlayBG",c="#facebox_overlay",d=false,h="close.facebox",k="keydown.facebox",f="#facebox",j="#facebox .body",e="#facebox .content",g="#facebox .loading",b=true;a.facebox=function(b,c){a.facebox.loading();if(b.ajax)m(b.ajax);else if(b.image)l(b.image);else if(b.div)n(b.div);else if(a.isFunction(b))b.call(a);else a.facebox.reveal(b,c)};a.extend(a.facebox,{settings:{opacity:0,overlay:b,loadingImage:"/jscripts/facebox/loading.gif",closeImage:"/jscripts/facebox/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="content">                 </div>                 <div class="footer">                   <a href="#" class="close">                     <img src="/jscripts/facebox/closelabel.gif" title="close" class="close_image" />                   </a>                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},loading:function(){p();if(a(g).length==1)return b;u();a(e).empty();a(j).children().hide().end().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a(f).css({top:s()[1]+r()/10,left:385.5}).show();a(document).bind(k,function(c){c.keyCode==27&&a.facebox.close();return b});a(document).trigger("loading.facebox")},reveal:function(c,b){a(document).trigger("beforeReveal.facebox");b&&a(e).addClass(b);a(e).append(c);a(g).remove();a(j).children().fadeIn("normal");a(f).css("left",a(window).width()/2-a("#facebox table").width()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){a(document).trigger(h);return d}});a.fn.facebox=function(e){p(e);function c(){a.facebox.loading(b);var c=this.rel.match(/facebox\[?\.(\w+)\]?/);if(c)c=c[1];n(this.href,c);return d}return this.click(c)};function p(d){if(a.facebox.settings.inited)return b;else a.facebox.settings.inited=b;a(document).trigger("init.facebox");q();var e=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=new RegExp("."+e+"$","i");d&&a.extend(a.facebox.settings,d);a("body").append(a.facebox.settings.faceboxHtml);var c=[new Image,new Image];c[0].src=a.facebox.settings.closeImage;c[1].src=a.facebox.settings.loadingImage;a(f).find(".b:first, .bl, .br, .tl, .tr").each(function(){c.push(new Image);c.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#facebox .close").click(a.facebox.close);a("#facebox .close_image").attr("src",a.facebox.settings.closeImage)}function s(){var a,b;if(self.pageYOffset){b=self.pageYOffset;a=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){b=document.documentElement.scrollTop;a=document.documentElement.scrollLeft}else if(document.body){b=document.body.scrollTop;a=document.body.scrollLeft}return[a,b]}function r(){var a;if(self.innerHeight)a=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)a=document.documentElement.clientHeight;else if(document.body)a=document.body.clientHeight;return a}function q(){var b=a.facebox.settings;b.loadingImage=b.loading_image||b.loadingImage;b.closeImage=b.close_image||b.closeImage;b.imageTypes=b.image_types||b.imageTypes;b.faceboxHtml=b.facebox_html||b.faceboxHtml}function n(b,c){if(b.match(/#/)){var e=window.location.href.split("#")[0],d=b.replace(e,"");a.facebox.reveal(a(d).clone().show(),c)}else if(b.match(a.facebox.settings.imageTypesRegexp))l(b,c);else m(b,c)}function l(d,c){var b=new Image;b.onload=function(){a.facebox.reveal('<div class="image"><img src="'+b.src+'" /></div>',c)};b.src=d}function m(c,b){a.get(c,function(c){a.facebox.reveal(c,b)})}function o(){return a.facebox.settings.overlay==d||a.facebox.settings.opacity===null}function u(){if(o())return;a("facebox_overlay").length==0&&a("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');a(c).hide().addClass(i).css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger(h)}).fadeIn(200);return d}function t(){if(o())return;a(c).fadeOut(200,function(){a(c).removeClass(i);a(c).addClass("facebox_hide");a(c).remove()});return d}a(document).bind(h,function(){a(document).unbind(k);a(f).fadeOut(function(){a(e).removeClass().addClass("content");t();a(g).remove()})})})(jQuery);typeof Sys!=="undefined"&&Sys.Application.notifyScriptLoaded()