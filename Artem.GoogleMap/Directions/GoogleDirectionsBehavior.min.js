Type.registerNamespace("Artem.Google");Artem.Google.DirectionsBehavior=function(a){Artem.Google.DirectionsBehavior.initializeBase(this,[a])};Artem.Google.DirectionsBehavior.prototype={initialize:function(){Artem.Google.DirectionsBehavior.callBaseMethod(this,"initialize");this._attach()},dispose:function(){this.detachEvents();Artem.Google.DirectionsBehavior.callBaseMethod(this,"dispose")}};(function(a){var b=false;a.get_map=function(){return this.map};a.get_name=function(){return this.name};a.set_name=function(a){this.name=a};a.get_renderer=function(){return this.renderer};a.get_servise=function(){return this.service};a.get_avoidHighways=function(){return this.avoidHighways?this.avoidHighways:b};a.set_avoidHighways=function(a){this.avoidHighways=a};a.get_avoidTolls=function(){return this.avoidTolls?this.avoidTolls:b};a.set_avoidTolls=function(a){this.avoidTolls=a};a.get_destination=function(){return this.destination};a.set_destination=function(a){this.destination=a};a.get_optimizeWaypoints=function(){return this.optimizeWaypoints?this.optimizeWaypoints:b};a.set_optimizeWaypoints=function(a){this.optimizeWaypoints=a};a.get_origin=function(){return this.origin};a.set_origin=function(a){this.origin=a};a.get_provideRouteAlternatives=function(){return this.provideRouteAlternatives?this.provideRouteAlternatives:b};a.set_provideRouteAlternatives=function(a){this.provideRouteAlternatives=a};a.get_region=function(){return this.region};a.set_region=function(a){this.region=a};a.get_travelMode=function(){return this.travelMode};a.set_travelMode=function(a){this.travelMode=a};a.get_unitSystem=function(){return this.unitSystem};a.set_unitSystem=function(a){this.unitSystem=a};a.get_waypoints=function(){return this.waypoints};a.set_waypoints=function(a){this.waypoints=a};a.get_draggable=function(){return this.draggable};a.set_draggable=function(a){this.draggable=a};a.get_hideRouteList=function(){return this.hideRouteList};a.set_hideRouteList=function(a){this.hideRouteList=a};a.get_markerOptions=function(){return this.markerOptions};a.set_markerOptions=function(a){this.markerOptions=a};a.get_panelId=function(){return this.panelId};a.set_panelId=function(a){this.panelId=a};a.get_polylineOptions=function(){return this.polylineOptions};a.set_polylineOptions=function(a){this.polylineOptions=a};a.get_preserveViewport=function(){return this.preserveViewport};a.set_preserveViewport=function(a){this.preserveViewport=a};a.get_routeIndex=function(){return this.routeIndex};a.set_routeIndex=function(a){this.routeIndex=a};a.get_suppressBicyclingLayer=function(){return this.suppressBicyclingLayer};a.set_suppressBicyclingLayer=function(a){this.suppressBicyclingLayer=a};a.get_suppressInfoWindows=function(){return this.suppressInfoWindows};a.set_suppressInfoWindows=function(a){this.suppressInfoWindows=a};a.get_suppressMarkers=function(){return this.suppressMarkers};a.set_suppressMarkers=function(a){this.suppressMarkers=a};a.get_suppressPolylines=function(){return this.suppressPolylines};a.set_suppressPolylines=function(a){this.suppressPolylines=a};function d(a){Artem.Google.Log.error("Directions routing failed with status: "+a)}function c(g,e){var a=this;if(e==google.maps.DirectionsStatus.OK){var f=b;if(f=!a.renderer){var c={draggable:a.draggable,hideRouteList:a.hideRouteList,map:a.map,preserveViewport:a.preserveViewport,routeIndex:a.routeIndex};if(a.markerOptions)c.markerOptions=a.markerOptions;if(a.panelId)c.panel=document.getElementById(a.panelId);if(a.polylineOptions)c.polylineOptions=a.polylineOptions;if(a.suppressBicyclingLayer)c.suppressBicyclingLayer=a.suppressBicyclingLayer;if(a.suppressInfoWindows)c.suppressInfoWindows=a.suppressInfoWindows;if(a.suppressMarkers)c.suppressMarkers=a.suppressMarkers;if(a.suppressPolylines)c.suppressPolylines=a.suppressPolylines;a.renderer=new google.maps.DirectionsRenderer(c)}a.renderer.setDirections(g);f&&a.composeEvents(a.renderer,null)}else d(e)}a._attach=function(){var a=$find(this.get_element().id);a&&a.add_mapLoaded(Function.createDelegate(this,this.create))};a.create=function(){var a=this;if(!a.service)a.service=new google.maps.DirectionsService;if(!a.map){var d=$find(a.get_element().id);if(d)a.map=d.get_map()}var b={destination:a.destination,origin:a.origin,travelMode:a.travelMode==0?google.maps.TravelMode.DRIVING:a.travelMode==1?google.maps.TravelMode.WALKING:google.maps.TravelMode.BICYCLING};if(a.avoidHighways)b.avoidHighways=a.avoidHighways;if(a.avoidTolls)b.avoidTolls=a.avoidTolls;if(a.optimizeWaypoints)b.optimizeWaypoints=a.optimizeWaypoints;if(a.provideRouteAlternatives)b.provideRouteAlternatives=a.provideRouteAlternatives;if(a.region)b.region=a.region;if(a.unitSystem)b.unitSystem=a.unitSystem;if(a.waypoints)b.waypoints=a.waypoints;if(b.origin&&b.destination)a.service.route(b,Function.createDelegate(a,c));else{!a.origin&&Artem.Google.Log.warn("GoogleDirections: origin value is missing!");!a.destination&&Artem.Google.Log.warn("GoogleDirections: destination value is missing!")}};a.getDirections=function(){return this.renderer.getDirections()};a.getMap=function(){return this.renderer.getMap()};a.getPanel=function(){return this.renderer.getPanel()};a.getRouteIndex=function(){return this.renderer.getRouteIndex()};a.setDirections=function(a){this.renderer.setDirections(a)};a.setMap=function(a){this.renderer.setMap(a);this.map=a};a.setOptions=function(a){this.renderer.setOptions(a)};a.setPanel=function(a){this.renderer.setPanel(a)};a.setRouteIndex=function(a){this.renderer.setRouteIndex(a);this.routeIndex=a}})(Artem.Google.DirectionsBehavior.prototype);(function(b){var a="changed";b.composeEvents=function(d,e){var b=this;if(!b.listener){d=d||b.get_renderer();if(d){e=e||b.get_events().getHandler(a);if(e)b.listener=google.maps.event.addListener(d,"directions_changed",Function.createDelegate(b,c))}}};b.detachEvents=function(){this.renderer&&google.maps.event.clearInstanceListeners(this.renderer)};b.add_changed=function(b){this.get_events().addHandler(a,b);this.composeEvents(null,b)};b.remove_changed=function(c){var b=this;b.get_events().removeHandler(a,c);if(b.listener){var d=b.get_events().getHandler(a);!d&&google.maps.event.removeListener(b.listener)}};function c(c){var b=this.get_events().getHandler(a);b&&b(this,c)}})(Artem.Google.DirectionsBehavior.prototype);Artem.Google.DirectionsBehavior.raiseServerChanged=function(e){var c=e.getDirections().routes,f={name:"change"};if(c&&c.length>0){var d=c[0].legs;if(d&&d.length){var a=d[0];delete a.via_waypoint;delete a.via_waypoints;a.end_location={Latitude:a.end_location.Ma,Longitude:a.end_location.Na};a.start_location={Latitude:a.start_location.Ma,Longitude:a.start_location.Na};for(var b=0;b<a.steps.length;b++){delete a.steps[b].encoded_lat_lngs;delete a.steps[b].end_point;delete a.steps[b].lat_lngs;delete a.steps[b].path;delete a.steps[b].polyline;delete a.steps[b].start_point;delete a.steps[b].travel_mode;a.steps[b].end_location={Latitude:a.steps[b].end_location.Ma,Longitude:a.steps[b].end_location.Na};a.steps[b].start_location={Latitude:a.steps[b].start_location.Ma,Longitude:a.steps[b].start_location.Na}}f.route=a}}__doPostBack(e.get_name(),Sys.Serialization.JavaScriptSerializer.serialize(f))};Artem.Google.DirectionsBehavior.registerClass("Artem.Google.DirectionsBehavior",Sys.UI.Behavior)