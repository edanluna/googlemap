Type.registerNamespace("Artem.Google");Artem.Google.MarkersBehavior=function(a){Artem.Google.MarkersBehavior.initializeBase(this,[a])};Artem.Google.MarkersBehavior.prototype={initialize:function(){Artem.Google.MarkersBehavior.callBaseMethod(this,"initialize");Artem.Worker.queue(Function.createDelegate(this,this._attach))},dispose:function(){this._detach();Artem.Google.MarkersBehavior.callBaseMethod(this,"dispose")}};(function(a){a.counter=0;a.map=null;a.markers=[];a.get_groupOptions=function(){return this.groupOptions};a.set_groupOptions=function(a){this.groupOptions=a};a.get_infoOptions=function(){return this.infoOptions};a.set_infoOptions=function(a){this.infoOptions=a};a.get_markerOptions=function(){return this.markerOptions};a.set_markerOptions=function(a){this.markerOptions=a};a.get_name=function(){return this.name};a.set_name=function(a){this.name=a};a._attach=function(){var a=$find(this.get_element().id);a&&a.add_mapLoaded(Function.createDelegate(this,this.create))};a._detach=function(){if(this.markers)for(var a=0;a<this.markers.length;a++)google.maps.event.clearInstanceListeners(this.markers[a])};a.create=function(){if(this.markerOptions){var c,g,h;if(!this.map){c=$find(this.get_element().id);if(c)this.map=c.map}for(var d=0;d<this.markerOptions.length;d++){var a=Artem.Google.merge(this.groupOptions,this.markerOptions[d]);a.map=this.map;a.index=d;if(a.position){a.position=new google.maps.LatLng(a.position.lat,a.position.lng);Function.createDelegate(this,b)(null,a)}else if(a.address){var f=Function.createDelegate(this,Function.createCallback(b,a)),e={address:a.address};if(c){e.language=c.get_language();e.region=c.get_region()}Artem.Google.Geocoding.getLocation(e,f)}}}};function b(b,a){if(a){if(b)a.position=b;gmarker=new google.maps.Marker(a);if(a.info){ginfo=new google.maps.InfoWindow(Artem.Google.merge({content:a.info},this.infoOptions));a.info=ginfo;google.maps.event.addListener(gmarker,"click",Function.createDelegate(this,Function.createCallback(function(b,a){a.i.open(this.map,a.m)},{m:gmarker,i:ginfo})));this.markerOptions[a.index].autoOpen&&ginfo.open(this.map,gmarker)}this.markers.push(gmarker)}this.counter++;this.counter==this.markerOptions.length&&this.composeEvents()}})(Artem.Google.MarkersBehavior.prototype);(function(a){var b={animation_changed:c,click:v,clickable_changed:d,cursor_changed:h,dblclick:l,drag:w,dragend:t,draggable_changed:e,dragstart:p,flat_changed:m,icon_changed:n,mousedown:q,mouseout:s,mouseover:r,mouseup:u,position_changed:f,rightclick:o,shadow_changed:i,title_changed:k,visible_changed:g,zindex_changed:j};a.delegates={animation_changed:null,click:null,clickable_changed:null,cursor_changed:null,dblclick:null,drag:null,dragend:null,draggable_changed:null,dragstart:null,flat_changed:null,icon_changed:null,mousedown:null,mouseout:null,mouseover:null,mouseup:null,position_changed:null,rightclick:null,shadow_changed:null,title_changed:null,visible_changed:null,zindex_changed:null};a.listeners={animation_changed:[],click:[],clickable_changed:[],cursor_changed:[],dblclick:[],drag:[],dragend:[],draggable_changed:[],dragstart:[],flat_changed:[],icon_changed:[],mousedown:[],mouseout:[],mouseover:[],mouseup:[],position_changed:[],rightclick:[],shadow_changed:[],title_changed:[],visible_changed:[],zindex_changed:[]};a.composeEvents=function(){if(this.markers)for(var e,d,a=0;a<this.markers.length;a++)for(var c in b){e=this.get_events().getHandler(c);d=this.listeners[c][a];if(e){if(!d){var f=Function.createDelegate(this,Function.createCallback(b[c],this.markers[a].index));this.listeners[c][a]=google.maps.event.addListener(this.markers[a],c,f)}}else d&&google.maps.event.removeListener(d)}};a.add_animationChanged=function(a){this.get_events().addHandler("animation_changed",a);this.composeEvents()};a.remove_animationChanged=function(a){this.get_events().removeHandler("animation_changed",a);this.composeEvents()};function c(b){var a=this.get_events().getHandler("animation_changed");a&&a(this,{index:b})}a.add_click=function(a){this.get_events().addHandler("click",a);this.composeEvents()};a.remove_click=function(a){this.get_events().removeHandler("click",a);this.composeEvents()};function v(b,c){var a=this.get_events().getHandler("click");b.index=c;a&&a(this,b)}a.add_clickableChanged=function(a){this.get_events().addHandler("clickable_changed",a);this.composeEvents()};a.remove_clickableChanged=function(a){this.get_events().removeHandler("clickable_changed",a);this.composeEvents()};function d(b){var a=this.get_events().getHandler("clickable_changed");a&&a(this,{index:b})}a.add_cursorChanged=function(a){this.get_events().addHandler("cursor_changed",a);this.composeEvents()};a.remove_cursorChanged=function(a){this.get_events().removeHandler("cursor_changed",a);this.composeEvents()};function h(b){var a=this.get_events().getHandler("cursor_changed");a&&a(this,{index:b})}a.add_doubleClick=function(a){this.get_events().addHandler("dblclick",a);this.composeEvents()};a.remove_doubleClick=function(a){this.get_events().removeHandler("dblclick",a);this.composeEvents()};function l(b,c){var a=this.get_events().getHandler("dblclick");b.index=c;a&&a(this,b)}a.add_drag=function(a){this.get_events().addHandler("drag",a);this.composeEvents()};a.remove_drag=function(a){this.get_events().removeHandler("drag",a);this.composeEvents()};function w(b,c){var a=this.get_events().getHandler("drag");b.index=c;a&&a(this,b)}a.add_dragEnd=function(a){this.get_events().addHandler("dragend",a);this.composeEvents()};a.remove_dragEnd=function(a){this.get_events().removeHandler("dragend",a);this.composeEvents()};function t(b,c){var a=this.get_events().getHandler("dragend");b.index=c;a&&a(this,b)}a.add_draggableChanged=function(a){this.get_events().addHandler("draggable_changed",a);this.composeEvents()};a.remove_draggableChanged=function(a){this.get_events().removeHandler("draggable_changed",a);this.composeEvents()};function e(b){var a=this.get_events().getHandler("draggable_changed");a&&a(this,{index:b})}a.add_dragStart=function(a){this.get_events().addHandler("dragstart",a);this.composeEvents()};a.remove_dragStart=function(a){this.get_events().removeHandler("dragstart",a);this.composeEvents()};function p(b,c){var a=this.get_events().getHandler("dragstart");b.index=c;a&&a(this,b)}a.add_flatChanged=function(a){this.get_events().addHandler("flat_changed",a);this.composeEvents()};a.remove_flatChanged=function(a){this.get_events().removeHandler("flat_changed",a);this.composeEvents()};function m(b){var a=this.get_events().getHandler("flat_changed");a&&a(this,{index:b})}a.add_iconChanged=function(a){this.get_events().addHandler("icon_changed",a);this.composeEvents()};a.remove_iconChanged=function(a){this.get_events().removeHandler("icon_changed",a);this.composeEvents()};function n(b){var a=this.get_events().getHandler("icon_changed");a&&a(this,{index:b})}a.add_mouseDown=function(a){this.get_events().addHandler("mousedown",a);this.composeEvents()};a.remove_mouseDown=function(a){this.get_events().removeHandler("mousedown",a);this.composeEvents()};function q(b,c){var a=this.get_events().getHandler("mousedown");b.index=c;a&&a(this,b)}a.add_mouseOut=function(a){this.get_events().addHandler("mouseout",a);this.composeEvents()};a.remove_mouseOut=function(a){this.get_events().removeHandler("mouseout",a);this.composeEvents()};function s(b,c){var a=this.get_events().getHandler("mouseout");b.index=c;a&&a(this,b)}a.add_mouseOver=function(a){this.get_events().addHandler("mouseover",a);this.composeEvents()};a.remove_mouseOver=function(a){this.get_events().removeHandler("mouseover",a);this.composeEvents()};function r(b,c){var a=this.get_events().getHandler("mouseover");b.index=c;a&&a(this,b)}a.add_mouseUp=function(a){this.get_events().addHandler("mouseup",a);this.composeEvents()};a.remove_mouseUp=function(a){this.get_events().removeHandler("mouseup",a);this.composeEvents()};function u(b,c){var a=this.get_events().getHandler("mouseup");b.index=c;a&&a(this,b)}a.add_positionChanged=function(a){this.get_events().addHandler("position_changed",a);this.composeEvents()};a.remove_positionChanged=function(a){this.get_events().removeHandler("position_changed",a);this.composeEvents()};function f(b){var a=this.get_events().getHandler("position_changed");a&&a(this,{index:b})}a.add_rightClick=function(a){this.get_events().addHandler("rightclick",a);this.composeEvents()};a.remove_rightClick=function(a){this.get_events().removeHandler("rightclick",a);this.composeEvents()};function o(b,c){var a=this.get_events().getHandler("rightclick");b.index=c;a&&a(this,b)}a.add_shadowChanged=function(a){this.get_events().addHandler("shadow_changed",a);this.composeEvents()};a.remove_shadowChanged=function(a){this.get_events().removeHandler("shadow_changed",a);this.composeEvents()};function i(b){var a=this.get_events().getHandler("shadow_changed");a&&a(this,{index:b})}a.add_shapeChanged=function(a){this.get_events().addHandler("shape_changed",a);this.composeEvents()};a.remove_shapeChanged=function(a){this.get_events().removeHandler("shape_changed",a);this.composeEvents()};a.add_titleChanged=function(a){this.get_events().addHandler("title_changed",a);this.composeEvents()};a.remove_titleChanged=function(a){this.get_events().removeHandler("title_changed",a);this.composeEvents()};function k(b){var a=this.get_events().getHandler("title_changed");a&&a(this,{index:b})}a.add_visibleChanged=function(a){this.get_events().addHandler("visible_changed",a);this.composeEvents()};a.remove_visibleChanged=function(a){this.get_events().removeHandler("visible_changed",a);this.composeEvents()};function g(b){var a=this.get_events().getHandler("visible_changed");a&&a(this,{index:b})}a.add_zindexChanged=function(a){this.get_events().addHandler("zindex_changed",a);this.composeEvents()};a.remove_zindexChanged=function(a){this.get_events().removeHandler("zindex_changed",a);this.composeEvents()};function j(b){var a=this.get_events().getHandler("zindex_changed");a&&a(this,{index:b})}})(Artem.Google.MarkersBehavior.prototype);(function(b){function a(f,c,a){var b=a.latLng||c.markers[a.index].getPosition(),d=c.name,e={index:a.index,name:f,position:{lat:b.lat(),lng:b.lng()}};__doPostBack(d,Sys.Serialization.JavaScriptSerializer.serialize(e))}b.raiseServerAnimationChanged=function(b,c){a("animationChanged",b,c)};b.raiseServerClick=function(b,c){a("click",b,c)};b.raiseServerClickableChanged=function(b,c){a("clickableChanged",b,c)};b.raiseServerCursorChanged=function(b,c){a("cursorChanged",b,c)};b.raiseServerDoubleClick=function(b,c){a("doubleClick",b,c)};b.raiseServerDrag=function(b,c){a("drag",b,c)};b.raiseServerDragEnd=function(b,c){a("dragEnd",b,c)};b.raiseServerDragStart=function(b,c){a("dragStart",b,c)};b.raiseServerFlatChanged=function(b,c){a("flatChanged",b,c)};b.raiseServerIconChanged=function(b,c){a("iconChanged",b,c)};b.raiseServerMouseDown=function(b,c){a("mouseDown",b,c)};b.raiseServerMouseOut=function(b,c){a("mouseOut",b,c)};b.raiseServerMouseOver=function(b,c){a("mouseOver",b,c)};b.raiseServerMouseUp=function(b,c){a("mouseUp",b,c)};b.raiseServerPositionChanged=function(b,c){a("positionChanged",b,c)};b.raiseServerRightClick=function(b,c){a("rightClick",b,c)};b.raiseServerShadowChanged=function(b,c){a("shadowChanged",b,c)};b.raiseServerShapeChanged=function(b,c){a("shapeChanged",b,c)};b.raiseServerTitleChanged=function(b,c){a("titleChanged",b,c)};b.raiseServerVisibleChanged=function(b,c){a("visibleChanged",b,c)};b.raiseServerZIndexChanged=function(b,c){a("zindexChanged",b,c)}})(Artem.Google.MarkersBehavior);Artem.Google.MarkersBehavior.registerClass("Artem.Google.MarkersBehavior",Sys.UI.Behavior)