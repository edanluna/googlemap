Type.registerNamespace("Artem.Google");Artem.Google.Marker=function(d,c,b){var a=this;a.Index=c;a.Address=b.Address;a.AutoOpenInfo=b.AutoOpenInfo;a.Clickable=b.Clickable;a.Cursor=b.Cursor;a.Draggable=b.Draggable;a.Flat=b.Flat;a.HasInfoContent=b.HasInfoContent;a.Icon=b.Icon;a.InfoWindowOptions=b.InfoWindowOptions;a.OpenInfoBehaviour=b.OpenInfoBehaviour;a.Position=b.Position;a.Shadow=b.Shadow;a.Shape=b.Shape;a.Text=b.Text;a.Title=b.Title;a.Visible=b.Visible;a.ZIndex=b.ZIndex;a.get_map=function(){return d};a.initialize()};Artem.Google.Marker.prototype={Address:null,AutoOpenInfo:false,Clickable:true,Cursor:null,Draggable:false,Flat:false,HasInfoContent:false,Icon:null,Index:null,InfoWindowOptions:null,OpenInfoBehaviour:null,Position:null,Shadow:null,Shape:null,Text:null,Title:null,Visible:true,ZIndex:null,get_map:null,get_marker:null,get_infoWindow:null,initialize:function(){var a=this;if(a.Position)a._create(new google.maps.LatLng(a.Position.Latitude,a.Position.Longitude));else{var b=a;a.get_map().geocodeAddress(a.Address,function(a){b._create(a)})}},dispose:function(){var a=this,b=a.get_marker();b&&google.maps.event.clearInstanceListeners(b);delete a.get_marker;delete a.get_map;delete a.Address;delete a.AutoOpenInfo;delete a.Clickable;delete a.Cursor;delete a.Draggable;delete a.Flat;delete a.Icon;delete a.InfoWindowOptions;delete a.OpenInfoBehaviour;delete a.Position;delete a.Shadow;delete a.Shape;delete a.Text;delete a.Title;delete a.Visible;delete a.ZIndex},save:function(){},getClickable:function(){return this.get_marker().getClickable()},getCursor:function(){return this.get_marker().getClickable()},getDraggable:function(){return this.get_marker().getDraggable()},getFlat:function(){return this.get_marker().getFlat()},getIcon:function(){return this.get_marker().getIcon()},getMap:function(){return this.get_marker().getMap()},getPosition:function(){return this.get_marker().getPosition()},getShadow:function(){return this.get_marker().getShadow()},getShape:function(){return this.get_marker().getShape()},getTitle:function(){return this.get_marker().getTitle()},getVisible:function(){return this.get_marker().getVisible()},getZIndex:function(){return this.get_marker().getZIndex()},setClickable:function(a){this.get_marker().setClickable(a)},setCursor:function(a){this.get_marker().setCursor(a)},setDraggable:function(a){this.get_marker().setDraggable(a)},setFlat:function(a){this.get_marker().setFlat(a)},setIcon:function(a){this.get_marker().setIcon(a)},setMap:function(a){this.get_marker().setMap(a)},setOptions:function(a){this.get_marker().setOptions(a)},setPosition:function(a){this.get_marker().setPosition(a)},setShadow:function(a){this.get_marker().setShadow(a)},setShape:function(a){this.get_marker().setShape(a)},setTitle:function(a){this.get_marker().setTitle(a)},setVisible:function(a){this.get_marker().setVisible(a)},setZIndex:function(a){this.get_marker().setZIndex(a)},_create:function(c){var a=this,d,b;if(c){var e={clickable:a.Clickable,cursor:a.Cursor,draggable:a.Draggable,flat:a.Flat,icon:a._toImage(a.Icon),map:a.get_map().get_map(),position:c,shadow:a._toImage(a.Shadow),shape:a._toShape(a.Shape),title:a.Title,visible:a.Visible,zIndex:a.ZIndex},f=a;d=new google.maps.Marker(e)}a.get_marker=function(){return d};b=a._createInfo();a.get_infoWindow=function(){return b}},_createInfo:function(){var a=this,g,c,d=a.get_marker();if(d){var f=a,b={content:null};if(a.HasInfoContent)b.content=$get(a.get_map().get_id()+"_MarkerInfo"+a.Index);else if(a.Text)b.content=a.Text;if(a.InfoWindowOptions){b.disableAutoPan=a.InfoWindowOptions.DisableAutoPan;if(a.InfoWindowOptions.MaxWidth)b.maxWidth=a.InfoWindowOptions.MaxWidth;if(a.InfoWindowOptions.PixelOffset)b.pixelOffset=a.InfoWindowOptions.PixelOffset;if(a.InfoWindowOptions.ZIndex)b.zIndex=a.InfoWindowOptions.ZIndex}c=new google.maps.InfoWindow(b);var e=a._getEventName(a.OpenInfoBehaviour);google.maps.event.addListener(d,e,function(){c.open(f.get_map().get_map(),d)});a.AutoOpenInfo&&c.open(a.get_map().get_map(),d)}return c},_getEventName:function(a){switch(a){case 1:return"click";case 2:return"dblclick";case 3:return"mousedown";case 4:return"mouseout";case 5:return"mouseover";case 6:return"mouseup"}},_toImage:function(a){if(a){var d,e,b,c;if(a.Anchor)d=new google.maps.Point(a.Anchor.X,a.Anchor.Y);if(a.Origin)e=new google.maps.Point(a.Origin.X,a.Origin.Y);if(b)b=new google.maps.Size(a.ScaledSize.Width,a.ScaledSize.Height);if(c)c=new google.maps.Size(a.Size.Width,a.Size.Height);return new google.maps.MarkerImage(a.Url,c,e,d,b)}else return null},_toShape:function(b){if(b){var a;switch(b.Type){case 1:a="circle";break;case 2:a="poly";break;case 3:a="rect"}return{coord:b.Coords,type:a}}else return null}};Artem.Google.Marker.registerClass("Artem.Google.Marker",null,Sys.IDisposable)