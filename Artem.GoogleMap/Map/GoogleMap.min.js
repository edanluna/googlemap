Type.registerNamespace("Artem.Google");Artem.Google.Map=function(a){Artem.Google.Map.initializeBase(this,[a])};Artem.Google.Map.prototype={initialize:function(){Artem.Google.Map.callBaseMethod(this,"initialize");this.create()},dispose:function(){this.detachEvents();Artem.Google.Map.callBaseMethod(this,"dispose")}};Artem.Google.Map.registerClass("Artem.Google.Map",Sys.UI.Control);(function(a){a.map=null;a.get_address=function(){return this.address};a.set_address=function(a){this.address=a};a.get_backgroundColor=function(){return this.backgroundColor};a.set_backgroundColor=function(a){this.backgroundColor=a};a.get_center=function(){return this.center};a.set_center=function(a){this.center=a};a.get_defaultAddress=function(){return this.defaultAddress};a.set_defaultAddress=function(a){this.defaultAddress=a};a.get_disableDefaultUI=function(){return this.disableDefaultUI};a.set_disableDefaultUI=function(a){this.disableDefaultUI=a};a.get_disableDoubleClickZoom=function(){return this.disableDoubleClickZoom};a.set_disableDoubleClickZoom=function(a){this.disableDoubleClickZoom=a};a.get_draggable=function(){return this.draggable};a.set_draggable=function(a){this.draggable=a};a.get_draggableCursor=function(){return this.draggableCursor};a.set_draggableCursor=function(a){this.draggableCursor=a};a.get_draggingCursor=function(){return this.draggingCursor};a.set_draggingCursor=function(a){this.draggingCursor=a};a.get_enableReverseGeocoding=function(){return this.enableReverseGeocoding};a.set_enableReverseGeocoding=function(a){this.enableReverseGeocoding=a};a.get_heading=function(){return this.heading};a.set_heading=function(a){this.heading=a};a.get_keyboardShortcuts=function(){return this.keyboardShortcuts};a.set_keyboardShortcuts=function(a){this.keyboardShortcuts=a};a.get_language=function(){return this.language};a.set_language=function(a){this.language=a};a.get_mapType=function(){return this.mapType};a.set_mapType=function(a){this.mapType=a};a.get_mapTypeControl=function(){return this.mapTypeControl};a.set_mapTypeControl=function(a){this.mapTypeControl=a};a.get_mapTypeControlOptions=function(){return this.mapTypeControlOptions};a.set_mapTypeControlOptions=function(a){this.mapTypeControlOptions=a};a.get_maxZoom=function(){return this.maxZoom};a.set_maxZoom=function(a){this.maxZoom=a};a.get_minZoom=function(){return this.minZoom};a.set_minZoom=function(a){this.minZoom=a};a.get_name=function(){return this.name};a.set_name=function(a){this.name=a};a.get_noClear=function(){return this.noClear};a.set_noClear=function(a){this.noClear=a};a.get_overviewMapControl=function(){return this.overviewMapControl};a.set_overviewMapControl=function(a){this.overviewMapControl=a};a.get_overviewMapControlOptions=function(){return this.overviewMapControlOptions};a.set_overviewMapControlOptions=function(a){this.overviewMapControlOptions=a};a.get_panControl=function(){return this.panControl};a.set_panControl=function(a){this.panControl=a};a.get_panControlOptions=function(){return this.panControlOptions};a.set_panControlOptions=function(a){this.panControlOptions=a};a.get_region=function(){return this.region};a.set_region=function(a){this.region=a};a.get_rotateControl=function(){return this.rotateControl};a.set_rotateControl=function(a){this.rotateControl=a};a.get_rotateControlOptions=function(){return this.rotateControlOptions};a.set_rotateControlOptions=function(a){this.rotateControlOptions=a};a.get_scaleControl=function(){return this.scaleControl};a.set_scaleControl=function(a){this.scaleControl=a};a.get_scaleControlOptions=function(){return this.scaleControlOptions};a.set_scaleControlOptions=function(a){this.scaleControlOptions=a};a.get_scrollwheel=function(){return this.scrollwheel};a.set_scrollwheel=function(a){this.scrollwheel=a};a.get_showTraffic=function(){return this.showTraffic};a.set_showTraffic=function(a){this.showTraffic=a};a.get_streetViewControl=function(){return this.streetViewControl};a.set_streetViewControl=function(a){this.streetViewControl=a};a.get_tilt=function(){return this.tilt};a.set_tilt=function(a){this.tilt=a};a.get_zoom=function(){return this.zoom};a.set_zoom=function(a){this.zoom=a};a.get_zoomControl=function(){return this.zoomControl};a.set_zoomControl=function(a){this.zoomControl=a};a.get_zoomControlOptions=function(){return this.zoomControlOptions};a.set_zoomControlOptions=function(a){this.zoomControlOptions=a};a.create=function(c){var a=this;if(!c){if(a.center)c=Artem.Google.Convert.toLatLng(a.center)}else a.center=c;if(c){var b={center:c,mapTypeId:Artem.Google.Convert.toMapTypeId(a.mapType),zoom:a.zoom,backgroundColor:a.backgroundColor,disableDefaultUI:a.disableDefaultUI,disableDoubleClickZoom:a.disableDoubleClickZoom,draggable:a.draggable,keyboardShortcuts:a.keyboardShortcuts,mapTypeControl:a.mapTypeControl,noClear:a.noClear,overviewMapControl:a.overviewMapControl,panControl:a.panControl,rotateControl:a.rotateControl,scaleControl:a.scaleControl,scrollwheel:a.scrollwheel,streetViewControl:a.streetViewControl,tilt:a.tilt,zoomControl:a.zoomControl};if(a.draggableCursor)b.draggableCursor=a.draggableCursor;if(a.draggingCursor)b.draggingCursor=a.draggingCursor;if(a.heading)b.heading=a.heading;if(a.mapTypeControlOptions)b.mapTypeControlOptions=a.mapTypeControlOptions;if(a.maxZoom)b.maxZoom=a.maxZoom;if(a.minZoom)b.minZoom=a.minZoom;if(a.overviewMapControlOptions)b.overviewMapControlOptions=a.overviewMapControlOptions;if(a.panControlOptions)b.panControlOptions=a.panControlOptions;if(a.rotateControlOptions)b.rotateControlOptions=a.rotateControlOptions;if(a.scaleControlOptions)b.scaleControlOptions=a.scaleControlOptions;if(a.zoomControlOptions)b.zoomControlOptions=a.zoomControlOptions;a.map=new google.maps.Map(a.get_element(),b);a.composeEvents();a.mapLoaded=true;a.raiseMapLoaded();if(a.showTraffic){var d=new google.maps.TrafficLayer;d.setMap(a.map)}if(a.enableReverseGeocoding){var b={latlng:c,language:a.language,region:a.region};Artem.Google.Geocoding.getAddress(b,Function.createDelegate(a,function(a){this.address=a}))}try{if(!window.maps)window.maps={};eval("window.maps."+a.get_id()+" = this;")}catch(e){}}else{var b={address:a.address,defaultAddress:a.defaultAddress,language:a.language,region:a.region};Artem.Google.Geocoding.getLocation(b,Function.createDelegate(a,a.create))}};a.fitBounds=function(a){this.map.fitBounds(a)};a.getBounds=function(){return this.map.getBounds()};a.getCenter=function(){return this.map.getCenter()};a.getDiv=function(){return this.map.getDiv()};a.getHeading=function(){return this.map.getHeading()};a.getMapTypeId=function(){return this.map.getMapTypeId()};a.getProjection=function(){return this.map.getProjection()};a.getStreetView=function(){return this.map.getStreetView()};a.getTilt=function(){return this.map.getTilt()};a.getZoom=function(){return this.map.getZoom()};a.panBy=function(a,b){this.map.panBy(a,b)};a.panTo=function(a){this.map.panTo(a)};a.panToBounds=function(a){this.map.panToBounds(a)};a.setCenter=function(a){this.map.setCenter(a)};a.setHeading=function(a){this.map.setHeading(a)};a.setMapTypeId=function(a){this.map.setMapTypeId(a)};a.setOptions=function(a){this.map.setOptions(a)};a.setStreetView=function(a){this.map.setStreetView(a)};a.setTilt=function(a){this.map.setTilt(a)};a.setZoom=function(a){this.map.setZoom(a)}})(Artem.Google.Map.prototype);(function(a){var n="zoom_changed",m="tilt_changed",l="tilesloaded",k="rightclick",j="resize",i="projection_changed",h="mouseover",g="mouseout",f="mousemove",e="maptypeid_changed",d="mapLoaded",c="idle",v="heading_changed",u="dragstart",t="dragend",s="drag",r="dblclick",q="click",p="center_changed",o="bounds_changed",b=null,w={bounds_changed:A,center_changed:B,click:N,dblclick:C,drag:O,dragend:L,dragstart:H,heading_changed:y,idle:P,maptypeid_changed:z,mousemove:I,mouseout:K,mouseover:J,projection_changed:x,resize:M,rightclick:G,tilesloaded:D,tilt_changed:E,zoom_changed:F};a.delegates={bounds_changed:b,center_changed:b,click:b,dblclick:b,drag:b,dragend:b,dragstart:b,heading_changed:b,idle:b,maptypeid_changed:b,mousemove:b,mouseout:b,mouseover:b,projection_changed:b,resize:b,rightclick:b,tilesloaded:b,tilt_changed:b,zoom_changed:b};a.listeners={bounds_changed:b,center_changed:b,click:b,dblclick:b,drag:b,dragend:b,dragstart:b,heading_changed:b,idle:b,maptypeid_changed:b,mousemove:b,mouseout:b,mouseover:b,projection_changed:b,resize:b,rightclick:b,tilesloaded:b,tilt_changed:b,zoom_changed:b};a.composeEvents=function(){var a=this;if(a.map){var c;for(var b in w){c=a.get_events().getHandler(b);if(c){if(!a.listeners[b]){if(!a.delegates[b])a.delegates[b]=Function.createDelegate(a,w[b]);a.listeners[b]=google.maps.event.addListener(a.map,b,a.delegates[b])}}else a.listeners[b]&&google.maps.event.removeListener(a.listeners[b])}}};a.detachEvents=function(){this.map&&google.maps.event.clearInstanceListeners(this.map)};a.add_boundsChanged=function(a){this.get_events().addHandler(o,a);this.composeEvents()};a.remove_boundsChanged=function(a){this.get_events().removeHandler(o,a);this.composeEvents()};function A(b){var a=this.get_events().getHandler(o);a&&a(this,b)}a.add_centerChanged=function(a){this.get_events().addHandler(p,a);this.composeEvents()};a.remove_centerChanged=function(a){this.get_events().removeHandler(p,a);this.composeEvents()};function B(b){var a=this.get_events().getHandler(p);a&&a(this,b)}a.add_click=function(a){this.get_events().addHandler(q,a);this.composeEvents()};a.remove_click=function(a){this.get_events().removeHandler(q,a);this.composeEvents()};function N(b){var a=this.get_events().getHandler(q);a&&a(this,b)}a.add_doubleClick=function(a){this.get_events().addHandler(r,a);this.composeEvents()};a.remove_doubleClick=function(a){this.get_events().removeHandler(r,a);this.composeEvents()};function C(b){var a=this.get_events().getHandler(r);a&&a(this,b)}a.add_drag=function(a){this.get_events().addHandler(s,a);this.composeEvents()};a.remove_drag=function(a){this.get_events().removeHandler(s,a);this.composeEvents()};function O(b){var a=this.get_events().getHandler(s);a&&a(this,b)}a.add_dragEnd=function(a){this.get_events().addHandler(t,a);this.composeEvents()};a.remove_dragEnd=function(a){this.get_events().removeHandler(t,a);this.composeEvents()};function L(b){var a=this.get_events().getHandler(t);a&&a(this,b)}a.add_dragStart=function(a){this.get_events().addHandler(u,a);this.composeEvents()};a.remove_dragStart=function(a){this.get_events().removeHandler(u,a);this.composeEvents()};function H(b){var a=this.get_events().getHandler(u);a&&a(this,b)}a.add_headingChanged=function(a){this.get_events().addHandler(v,a);this.composeEvents()};a.remove_headingChanged=function(a){this.get_events().removeHandler(v,a);this.composeEvents()};function y(b){var a=this.get_events().getHandler(v);a&&a(this,b)}a.add_idle=function(a){this.get_events().addHandler(c,a);this.composeEvents()};a.remove_idle=function(a){this.get_events().removeHandler(c,a);this.composeEvents()};function P(b){var a=this.get_events().getHandler(c);a&&a(this,b)}a.add_mapLoaded=function(a){if(!this.mapLoaded)this.get_events().addHandler(d,a);else a(this)};a.remove_mapLoaded=function(a){this.get_events().removeHandler(d,a)};a.raiseMapLoaded=function(){var a=this.get_events().getHandler(d);a&&a(this)};a.add_mapTypeChanged=function(a){this.get_events().addHandler(e,a);this.composeEvents()};a.remove_mapTypeChanged=function(a){this.get_events().removeHandler(e,a);this.composeEvents()};function z(b){var a=this.get_events().getHandler(e);a&&a(this,b)}a.add_mouseMove=function(a){this.get_events().addHandler(f,a);this.composeEvents()};a.remove_mouseMove=function(a){this.get_events().removeHandler(f,a);this.composeEvents()};function I(b){var a=this.get_events().getHandler(f);a&&a(this,b)}a.add_mouseOut=function(a){this.get_events().addHandler(g,a);this.composeEvents()};a.remove_mouseOut=function(a){this.get_events().removeHandler(g,a);this.composeEvents()};function K(b){var a=this.get_events().getHandler(g);a&&a(this,b)}a.add_mouseOver=function(a){this.get_events().addHandler(h,a);this.composeEvents()};a.remove_mouseOver=function(a){this.get_events().removeHandler(h,a);this.composeEvents()};function J(b){var a=this.get_events().getHandler(h);a&&a(this,b)}a.add_projectionChanged=function(a){this.get_events().addHandler(i,a);this.composeEvents()};a.remove_projectionChanged=function(a){this.get_events().removeHandler(i,a);this.composeEvents()};function x(b){var a=this.get_events().getHandler(i);a&&a(this,b)}a.add_resize=function(a){this.get_events().addHandler(j,a);this.composeEvents()};a.remove_resize=function(a){this.get_events().removeHandler(j,a);this.composeEvents()};function M(b){var a=this.get_events().getHandler(j);a&&a(this,b)}a.add_rightClick=function(a){this.get_events().addHandler(k,a);this.composeEvents()};a.remove_rightClick=function(a){this.get_events().removeHandler(k,a);this.composeEvents()};function G(b){var a=this.get_events().getHandler(k);a&&a(this,b)}a.add_tilesLoaded=function(a){this.get_events().addHandler(l,a);this.composeEvents()};a.remove_tilesLoaded=function(a){this.get_events().removeHandler(l,a);this.composeEvents()};function D(b){var a=this.get_events().getHandler(l);a&&a(this,b)}a.add_tiltChanged=function(a){this.get_events().addHandler(m,a);this.composeEvents()};a.remove_tiltChanged=function(a){this.get_events().removeHandler(m,a);this.composeEvents()};function E(b){var a=this.get_events().getHandler(m);a&&a(this,b)}a.add_zoomChanged=function(a){this.get_events().addHandler(n,a);this.composeEvents()};a.remove_zoomChanged=function(a){this.get_events().removeHandler(n,a);this.composeEvents()};function F(b){var a=this.get_events().getHandler(n);a&&a(this,b)}})(Artem.Google.Map.prototype);(function(b){function c(d,e){var a=d.map,b=a.getBounds(),c=a.getCenter();return{name:e,bounds:{sw:b.getSouthWest(),ne:b.getNorthEast()},center:{lat:c.lat(),lng:c.lng()},mapType:a.getMapTypeId(),zoom:a.getZoom()}}function a(a,b){__doPostBack(a,Sys.Serialization.JavaScriptSerializer.serialize(b))}b.raiseServerBoundsChanged=function(b){a(b.get_name(),c(b,"boundsChanged"))};b.raiseServerCenterChanged=function(b){a(b.get_name(),c(b,"centerChanged"))};b.raiseServerClick=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"click"})};b.raiseServerDoubleClick=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"doubleClick"})};b.raiseServerDrag=function(b){a(b.get_name(),c(b,"drag"))};b.raiseServerDragEnd=function(b){a(b.get_name(),c(b,"dragEnd"))};b.raiseServerDragStart=function(b){a(b.get_name(),c(b,"dragStart"))};b.raiseServerHeadingChanged=function(b){a(b.get_name(),{name:"headingChanged"})};b.raiseServerIdle=function(b){a(b.get_name(),{name:"idle"})};b.raiseServerMapTypeChanged=function(b){a(b.get_name(),c(b,"mapTypeChanged"))};b.raiseServerMouseMove=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"mouseMove"})};b.raiseServerMouseOut=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"mouseOut"})};b.raiseServerMouseOver=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"mouseOver"})};b.raiseServerProjectionChanged=function(b){a(b.get_name(),{name:"projectionChanged"})};b.raiseServerResize=function(b){a(b.get_name(),c(b,"resize"))};b.raiseServerRightClick=function(c,b){a(c.get_name(),{lat:b.latLng.lat(),lng:b.latLng.lng(),name:"rightClick"})};b.raiseServerTilesLoaded=function(b){a(b.get_name(),{name:"tilesLoaded"})};b.raiseServerTiltChanged=function(b){a(b.get_name(),{name:"tiltChanged"})};b.raiseServerZoomChanged=function(b){a(b.get_name(),c(b,"zoomChanged"))}})(Artem.Google.Map);Artem.Google.Convert=function(){function a(a){return a?new google.maps.LatLng(a.lat,a.lng):null}function c(a){var c=null;if(a){c=[];for(var b=0;b<a.length;b++)c.push(new google.maps.LatLng(a[b].lat,a[b].lng))}return c}function b(b){return b?new google.maps.LatLngBounds(a(b.sw),a(b.ne)):null}function d(a){switch(a){case 0:return google.maps.MapTypeId.HYBRID;case 1:return google.maps.MapTypeId.ROADMAP;case 2:return google.maps.MapTypeId.SATELLITE;case 3:return google.maps.MapTypeId.TERRAIN;default:return google.maps.MapTypeId.HYBRID}}return{toLatLng:a,toLatLngArray:c,toLatLngBounds:b,toMapTypeId:d}}();Artem.Google.Geocoding=function(){var a;function d(b,c){var d={lanlng:b.lanlng,language:b.language,region:b.region};a=a||new google.maps.Geocoder;a.geocode(d,function(a,d){if(d==google.maps.GeocoderStatus.OK)try{var b;if(a&&a.length)b=a[0].formatted_address;c(b)}catch(e){Artem.Google.Log.error(e)}else Artem.Google.Log.error("Reverse location geocoding failed with status: "+d)})}function c(c,d){var e={address:c.address,language:c.language,region:c.region};a=a||new google.maps.Geocoder;a.geocode(e,function(a,f){if(f==google.maps.GeocoderStatus.OK)try{var e;if(a&&a.length)e=a[0].geometry.location;d(e)}catch(g){Artem.Google.Log.error(g)}else b(f,c,d)})}function b(c,b,d){if(b.defaultAddress){Artem.Google.Log.warn(c+" ... applying default address.");var e={address:b.defaultAddress,language:b.language,region:b.region};a=a||new google.maps.Geocoder;a.geocode(e,function(a,c){if(c==google.maps.GeocoderStatus.OK){var b;if(a&&a.length)b=a[0].geometry.location;d(b)}else console&&console.error&&console.error("DefaultAddress geocoding failed with status: "+c)})}else Artem.Google.Log.error("Address geocoding failed with status: "+c+"\nDefaultAddress is not set and map was left empty!")}return{getAddress:d,getLocation:c}}();Artem.Google.Log=function(){function d(a){console&&console.dir&&console.dir(a)}function a(a){if(console&&console.error)console.error(a);else throw a;}function b(a){console&&console.info&&console.info(a)}function c(a){console&&console.warn&&console.warn(a)}return{dir:d,error:a,info:b,warn:c}}();Artem.Google.merge=function(c,d){var b={};if(c)for(var a in c)b[a]=c[a];if(d)for(var a in d)b[a]=d[a];return b}